<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Javascript Fundamentals</title>
</head>
<body>
  <div class="output">
    <ul>

    </ul>
  </div>
  <div class="capital">
    <ul>

    </ul>
  </div>
  <div class="string">
    <ul>

    </ul>
  </div>
  <div class="Price_Cal">
    <ul>

    </ul>
    <p id="totalBox"></p>
  </div>
  <div class="Search">
    <h2>Top 5 Searches</h2>
    <input type="text" name="" value="">
    <button type="button" name="button">Search</button>
    <ul>

    </ul>
  </div>
  <div class="shopping">
    <h2>Shopping done or not!?</h2>
    <label for="shoppingcheck">Has the shopping done or not?</label>
    <input type="checkbox" name="checkbox" id="shoppingcheck">
    <p></p>
  </div>
  <script>
  //Filtering greeting messages
  //Using indexOf function
  var list = document.querySelector('.output ul');
  //list.innerHTML = ' ';

  var greetings  = ['Happy Birthday!',
  'Merry Christmas my love!',
  'A happy Christmas to all the family!',
  'you\'re all i want for my Christmas!',
  'Get well soon'];
  for (var i = 0; i < greetings.length; i++) {
    //var input = greetings[i];
    if(greetings[i].indexOf('Christmas') !== -1){
      var result = greetings[i];
      var listitem = document.createElement('li');
      listitem.textContent = result;
      list.appendChild(listitem);
    }
  }

  //Fixing capitalization
  //using toLowerCase(), Slice() and toUpperCase() function
  var capitalList = document.querySelector('.capital ul');
  capitalList.innerHTML = ' ';

  var capitalised = ['lonDon', 'ManCHESTer', 'BiRmiNGHAM', 'liVERpoOL'];

  for(var i = 0; i < capitalised.length; i++){
    var lower = capitalised[i].toLowerCase();
    var firstLetter = lower.slice(0,1);
    var capital = lower.replace(firstLetter,firstLetter.toUpperCase());
    var listitem = document.createElement('li');
    listitem.textContent = capital;
    capitalList.appendChild(listitem);
  }

  //Making new strings from old parts
  //Using indexOf() and Slice() functions
  var stringList = document.querySelector('.string ul');
  stringList.innerHTML = ' ';

  var stringArray = ['MAN675847583748sjt567654;Manchester Piccadilly',
                     'GNF576746573fhdg4737dh4;Greenfield',
                     'LIV5hg65hd737456236dch46dg4;Liverpool Lime Street',
                     'SYB4f65hf75f736463;Stalybridge',
                     'HUD5767ghtyfyr4536dh45dg45dg3;Huddersfield'];

for(var i = 0; i < stringArray.length; i++){
  var firstthreeLetters = stringArray[i].slice(0,3);
  var semiC = stringArray[i].indexOf(';');
  var restString =  stringArray[i].slice(semiC + 1);
  var result = firstthreeLetters + ' : ' + restString;
  var listitem = document.createElement('li');
  listitem.textContent = result;
  stringList.appendChild(listitem);
}

/*
//Array Practice................
  var myData = 'Manchester,London,Liverpool,Birmingham,Leeds'
  myArray = myData.split(',');
  console.log(myArray);
  console.log(myArray.length);

  myNewString = myArray.join(',');
  console.log(myNewString);
  console.log(myNewString.length);

  var addItem = myArray.push('Pooja');
  console.log(myArray);
  console.log(addItem);
  console.log(myArray.length);

  var removedItem = myArray.pop();
  console.log(myArray);
  console.log(removedItem);
*/

//Using Array methods and functions
var myList = document.querySelector('.Price_Cal ul');
var totalBox = document.getElementById('totalBox');
myList.innerHTML = ' ';
totalBox.textContent = ' ';
var total = 0;

var products = ['Underpants:6.99',
'Socks:5.99',
'T-shirt:14.99',
'Trousers:31.99',
'Shoes:23.99'];

for (var i = 0; i < products.length; i++) {
  var subArray = products[i].split(':');
  console.log(subArray);
  var name = subArray[0];
  var price = Number(subArray[1]);
  total += price;
  var items = name + ' - ' + '$' + price;
  var listItems = document.createElement('li');
  listItems.textContent = items;

  console.log(listItems);

  myList.appendChild(listItems);
  totalBox.textContent = 'Total' + ' : '+ '$' + total.toFixed(2);
}

//Top 5 Searches function
var myList = document.querySelector('.Search ul');
var search = document.querySelector('.Search input');
var btn = document.querySelector('.Search button');

myList.innerHTML = ' ';
search.focus();

var myHistory = [];

btn.onclick = function(){
  if (search.value !== ' ') {
    myHistory.unshift(search.value);
    myList.innerHTML = ' ';
    search.value = ' ';
    search.focus();

    for (var i = 0; i < myHistory.length; i++) {
      var itemText = myHistory[i];
      var list = document.createElement('li');
      list.textContent = itemText;
      myList.appendChild(list);
    }
    if(myHistory.length >=5){
      myHistory.pop();
    }
    search.value = '';
    search.focus();
  }
}
//shoppingDone or not function goes here
var checkbox = document.querySelector('.shopping input');
    var result = document.querySelector('.shopping p');
    shoppingDone = false;

    checkbox.addEventListener('change',function(){
      checkbox.disabled = true;
      shoppingDone = true;
      updatedAllowance();
    });

    function updatedAllowance(){
      if(shoppingDone ===true){
        childAllowance = 10;
      }else {
        childAllowance = 5;
      }
      result.textContent = 'Child has earned $' + childAllowance + ' this week.'
    }
    updatedAllowance();
</script>
</body>
</html>
